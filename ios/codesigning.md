다른 사람이 개발중인 앱을 내 디바이스에서 테스트를 하는데 필요한 것이 궁금해서 정리

일단 먼저 알아야 할 것

>단지 애플만이 자신들의 하드웨어에서 어떤 소프트웨어를 실행할 권리를 가진다.

그렇다면 개발자들은 디바이스에서 어떻게 앱을 테스트하냐!!!

Apple 인증서를 이용해서 개발자가 애플 대신 앱을 실행할 권리를 부여한다.

애플 개발자 센터에서 인증서를 받을 수 있다. 일단 키체인 앱에서 인증 기관에서 인증서 요청을 해서 CSR(Certificate Signing Request) 을 생성해야 한다.

이때 일어 나는 일

1. 키체인 앱은 공개키와 개인키를 자동으로 생성, 이 키를 애플에 내가 개발자라는 것을 알리는 키이다.

2. 그리고 이 키를 이용해서 애플에 보낼 CertSingingRequest 파일을 생성한다. 이 파일에 내 정보 (이름, 이메일, 공개키, 개인키)를 포함하고, 개인키를 이용해 인증된다.

이 파일을 애플에 업로드해서 인증서를 요청할 수 있다. 이 인증서를 클릭하면 키체인앱에 내 인증서 카테고리에 추가되고 더블클릭하면 더 자세한 내용을 볼 수 있다.

애플 인증서를 발급 받음으로써 애플한테 내가 앱을 실행할 허락을 받았다, 한가지 더 남은 것은 내 디바이스가 나를 신뢰할 수 있는지 알아야 앱 설치를 허락할지 말지를 결정한다. 여기서 프로비저닝 프로파일이 필요하다.

프로비저닝 프로파일을 생성한다는것은 iOS디바이스를 앞 단계에서 만든 인증서와 연결한다는 것을 의미한다. 그 결과로 생성되는 *.mobileprovision 파일은 내 iOS앱을 컴파일하는 과정에서 사용되고, 앱을 테스트하려고 하는 디바이스에 설치가 되어야 한다.
프로비저닝 프로파일을 설치하는 방법은 Provisioning Portal 에서 다운 받은 파일을 더블클릭하면 Xcode가 자동으로 인식해서 프로비저닝 프로파일 목록에 저장한다. 개발자는 복수의 프로비저닝 프로파일을 가질 수 있다.

* 앱을 설치하고 실행하는 과정에서 앞에서 나온 인증서와 프로비저닝 프로파일이 어떻게 사용될까?

Xcode에서 빌드를 하면 .app 파일을 얻게 되고, 오른쪽 클릭하면 패키지 내용을 볼 수 있는데 그 안에서 프로비저닝 프로파일(실제 프로비저닝 프로파일의 복사본)과 _CodeSignature 폴더 안에 CodeSignature 란 파일(앱 번들의 파일들의 암호화된 해쉬정보 포함)을 볼 수 있다. 앱을 디바이스에 설치할 때 위에 포함된 프로비저닝 프로파일이 애플에서 서명된 것인지 확인하고, CodeResources란 파일에 해쉬 정보를 이용해서 앱에 있는 파일들이 변조가 없었는지를 확인한다. 둘 중에 하나라도 문제가 있다면 앱을 실행할 수 없다. 그리고 앱을 실행할 때도 앱에 변조가 있었는지, 디바이스 내에 앱에 포함된 프로비저닝 프로파일과 같은 프로비저닝 프로파일을 가지고 있는지 확인한다.

앱스토어에 배포했을때는 애플에서 앱을 승인하면서 자신들의 서명을 다시한다. 그래서 모든 iOS 기기에서 앱이 실행될 수 있도록 한다.

출처 : http://la-stranger.blogspot.kr/2014/04/ios.html
